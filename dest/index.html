<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>æ‰¾åº§ä½</title><style>body,html{margin:0;padding:0;background-color:rgb(249 250 251 / var(--tw-bg-opacity,1))}.container{display:flex;flex-direction:column;align-items:center;justify-content:center}.container .header{min-width:375px;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;justify-content:space-between}.group{display:flex;flex-direction:row;justify-content:center}.badge{background:rgba(255,0,0,.5);border:0 solid #e5e7eb;box-sizing:border-box;background-color:#fff;border-radius:8px;margin:8px;padding:8px}.board-container{width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;align-items:stretch}.board-col{height:100%;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:center}.board-row{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;flex:2 0 15px}.board-row div{display:flex;justify-content:center;align-items:center;margin:5px;border-radius:8px;-webkit-user-select:none}.board-row .b_light_blue{cursor:pointer}.board-row .b_light_blue:hover{background-color:#dbeafe}.board-header{display:flex;flex-direction:row;flex-wrap:nowrap;flex:1 0 15px;width:100%;justify-content:center;align-items:center}.board-left{flex:1 0 15px}.cell-h,.cell-w{flex:2 0 15px}.cell-err{box-sizing:border-box;border:1px solid red}.board{width:calc(100vw - 10px);margin:20px;-webkit-user-select:none;height:calc(100vw - 10px)}.help,.tip{width:calc(100vw - 10px);margin:20px;-webkit-user-select:none}@media (min-width:800px){.board{width:calc(40vw - 30px);height:calc(40vw - 30px);margin:5px;-webkit-user-select:none}.tip{width:calc(60vw - 30px);height:calc(40vw - 10px)!important;margin:5px;-webkit-user-select:none;overflow-x:hidden;overflow-y:visible}.help{width:calc(100vw - 30px);margin:5px;-webkit-user-select:none}}@media (min-width:1000px){.board{width:calc(50vw - 30px);height:calc(50vw - 30px);margin:5px;-webkit-user-select:none}.tip{width:calc(50vw - 30px);height:calc(50vw - 10px)!important;margin:5px;-webkit-user-select:none}.help{width:calc(100vw - 30px);margin:5px;-webkit-user-select:none}}@media (min-width:1400px){.board{width:calc(25vw - 30px);height:calc(25vw - 30px);margin:5px;-webkit-user-select:none}.help{width:calc(45vw - 30px);margin:5px;-webkit-user-select:none;max-height:700px}.tip{width:calc(30vw - 30px);height:calc(30vw - 10px);max-height:700px;margin:5px;-webkit-user-select:none}}.tip{display:flex;flex-direction:row;flex-wrap:wrap;height:calc(100vh - 100vw - 20px);align-items:flex-start;overflow-x:hidden;overflow-y:auto}.tip-cell{box-sizing:border-box;border:0 solid #e5e7eb;cursor:pointer;display:flex;align-items:center;border-radius:.5rem;padding:.5rem;transition-duration:150ms;background-color:rgba(239,246,255,.004);min-width:120px;max-width:300px;flex-shrink:1}.tip-cell-mask{opacity:.3}.tip-cell:hover{background-color:#dbeafe}.help{display:flex;flex-direction:column;align-items:flex-start;padding:.5rem}.help-row{padding:12px}.help-title{font-size:1.2rem;font-weight:700}.help-content{font-size:1rem;margin-top:.5rem}.top-radio{box-sizing:border-box;width:100%;padding:12px;border-radius:12px 12px 0 0}.circle-bg{display:inline-block;border-radius:50%;width:24px;height:24px;text-align:center;line-height:24px;padding:0;margin-right:4px;font-size:18px}.circle-bg-xl{display:inline-block;border-radius:50%;width:32px;height:32px;text-align:center;line-height:32px;padding:0;margin-right:4px;font-size:26px}.circle-bg-xl.actived{padding:0;box-sizing:border-box}button{box-sizing:border-box;border:0 solid #e5e7eb;cursor:pointer;border-radius:.5rem;padding:.5rem 1rem;margin:12px}button[disabled]{background-color:#f3f4f6;color:rgb(209 213 219);cursor:not-allowed}button .circle-bg{color:rgb(59 130 246);background-color:#f3f4f6}button[disabled] .circle-bg{color:rgb(209 213 219);background-color:#e5e7eb}.h1,.h2{font-size:32px}.h3{font-size:16px}.h4{font-size:12px}.t_white{color:#fff}.t_blue,.t_gray{color:rgb(59 130 246)}.t_yellow{color:#facc15}.t_green{color:green}.bold{font-weight:700}.b_gray{background-color:rgb(209 213 219)}.b_bule{background-color:rgb(59 130 246)}.b_yellow{background-color:rgb(245 158 11)}.b_green{background-color:rgb(59 130 246)}.b_red{background-color:rgb(244 114 182 / .75)}.b_light_blue{background-color:#eff6ff}.b_white{background-color:#fff}.space{margin:5px}.space-xl{margin:10px}.space-lg{margin:15px}.card{padding:10px;border-radius:12px;box-shadow:0 2px 4px rgba(0,0,0,.1)}.game-over-modal{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;z-index:1000}.game-over-content{background-color:#fff;padding:30px;border-radius:10px;text-align:center;font-size:24px;font-weight:700}.board-container[disabled]{pointer-events:none;opacity:.6}</style><div class=container><div class=header><div class="bold h1 space-xl">æ‰¾åº§ä½</div><div class="space-xl group"><div class=badge>ç¬¬ <span class="bold t_blue"id=level>1</span> å…³</div><div class="bold h3 badge"><span class=t_yellow>ğŸ’–</span> <span class="bold t_blue"id=life>3</span></div><div class="bold h3 badge"><span class=t_yellow>ğŸ†</span> <span class="bold t_blue"id=score>0</span></div></div></div><div class="space-xl group"><button class="h3 b_bule t_white"id=start onclick=startGame(1)><span class="t_blue circle-bg">â–¶</span> å¼€å§‹</button> <button class="h3 b_bule t_white"id=reset onclick=resetGame()><span class="t_blue circle-bg">â™»ï¸</span> é‡ç½®</button></div><div class=board-container><div class="card b_white board"id=board-container><div class=board-col id=board><div class=board-header><div class=board-left></div><div class="cell-w board-header"id=1-0>1</div><div class="cell-w board-header"id=2-0>2</div><div class="cell-w board-header"id=3-0>3</div><div class="cell-w board-header"id=4-0>4</div></div><div class="board-row cell-h"><div class=board-left>ä¸€</div><div class="cell-w b_light_blue"id=1-1></div><div class="cell-w b_light_blue"id=2-1></div><div class="cell-w b_light_blue"id=3-1></div><div class="cell-w b_light_blue"id=4-1></div></div><div class="board-row cell-h"><div class=board-left>äºŒ</div><div class="cell-w b_light_blue"id=1-2></div><div class="cell-w b_light_blue"id=2-2></div><div class="cell-w b_light_blue"id=3-2></div><div class="cell-w b_light_blue"id=4-2></div></div><div class="board-row cell-h"><div class=board-left>ä¸‰</div><div class="cell-w b_light_blue"id=1-3></div><div class="cell-w b_light_blue"id=2-3></div><div class="cell-w b_light_blue"id=3-3></div><div class="cell-w b_light_blue"id=4-3></div></div><div class="board-row cell-h"><div class=board-left>å››</div><div class="cell-w b_light_blue"id=1-4></div><div class="cell-w b_light_blue"id=2-4></div><div class="cell-w b_light_blue"id=3-4></div><div class="cell-w b_light_blue"id=4-4></div></div></div></div><div class="card tip"id=tip style=padding:0><div class="bold h3 b_gray top-radio"><span class="circle-bg b_yellow">â—ï¸</span> ä½ç½®æç¤º</div></div><div class="card help"style=padding:0><div class="bold h3 b_gray top-radio"><span class="circle-bg b_yellow">?</span> æ¸¸æˆè§„åˆ™</div><div class=help-row><span class=help-title>ç›®æ ‡ï¼š</span> <span class=help-content>æ ¹æ®æ£‹å­å³è¾¹çš„ä½ç½®æç¤ºï¼Œå°†æ£‹å­æ­£ç¡®æ‘†æ”¾åˆ°æ£‹ç›˜ä¸­ã€‚æ¯å…³çš„å¿ƒæ•°é‡ä»£è¡¨å¯å…è®¸æ”¾é”™æ£‹å­çš„æ¬¡æ•°ï¼Œè¿‡å…³åå‰©ä½™çš„æ˜Ÿæ˜Ÿæ•°é‡å³ä¸ºæœ¬å…³å¡è·å¾—çš„åˆ†æ•°ã€‚</span></div><div class=help-row><div class=help-title>æ“ä½œæ­¥éª¤ï¼š</div><div class=help-content>1.ç‚¹å‡»ã€Œå¼€å§‹ã€ç”Ÿæˆéšæœºè°œé¢˜ã€æ£‹å­ä½ç½®ä¸æç¤ºå…³è”ã€‚</div><div class=help-content>2.ç‚¹å‡»ï¼ˆæ‹¿èµ·ï¼‰æ£‹å­ï¼ˆå˜çº¢ï¼‰ã€‚å†æ¬¡ç‚¹å‡»ï¼ˆæ”¾ä¸‹ï¼‰æ£‹å­ï¼ˆå˜è“ï¼‰ã€‚</div><div class=help-content>3.æ‹¿èµ·æ—¶ç‚¹å‡»æ£‹ç›˜æ”¾ä¸‹æ£‹å­ï¼Œæ”¾ä¸‹æ—¶ç‚¹å‡»æ£‹ç›˜æ‹¿èµ°æ£‹å­ã€‚</div><div class=help-content>3.å¦‚æœæ£‹å­æ”¾ç½®é”™è¯¯ï¼Œæ£‹ç›˜è¾¹æ¡†ä¼šå˜çº¢</div><div class=help-content>4.å®Œæˆæ‰€æœ‰æ£‹å­æ­£ç¡®æ‘†æ”¾åè¿›å…¥ä¸‹ä¸€å…³ï¼Œéš¾åº¦é€æ¸é€’å¢ã€‚</div></div><div class=help-row><div class=help-title>æç¤ºç±»å‹ï¼š</div><div class=help-content>â— æ— æç¤ºï¼šéœ€è¦é€šè¿‡å…¶ä»–æç¤ºæ¨æ–­ä½ç½®</div><div class=help-content>â— ç»å¯¹ç²¾ç¡®ä½ç½®ï¼šå¦‚"åœ¨ç¬¬1åˆ—åœ¨ç¬¬2è¡Œ"</div><div class=help-content>â— çº¿æ€§ç›¸é‚»ä½ç½®ï¼šå¦‚"åœ¨Açš„å·¦ä¾§ç›¸é‚»ä½ç½®"æˆ–"åœ¨Açš„ä¸‹ä¾§ç›¸é‚»ä½ç½®"ï¼ˆç›¸é‚»ï¼‰</div><div class=help-content>â— çº¿æ€§ç›¸å¯¹ä½ç½®ï¼šå¦‚"åœ¨Açš„å·¦è¾¹"æˆ–"åœ¨Açš„ä¸‹è¾¹"ï¼ˆä¸ä¸€å®šç›¸é‚»ï¼‰</div><div class=help-content>â— é¢æ€§ç›¸å¯¹ä½ç½®ï¼šå¦‚"Aåœ¨Bçš„å³ä¸Šæ–¹"ï¼ˆå¯èƒ½ç›¸é‚»ä¹Ÿå¯èƒ½ä¸ç›¸é‚»ï¼‰</div><div class=help-content>â— å–åæç¤ºï¼šå¦‚"Aä¸åœ¨ç¬¬1åˆ—åœ¨ç¬¬2è¡Œ"</div></div></div></div></div><script>class Util{constructor(){}static randomInt(t,e){return parseInt(Math.random()*(e-t+1)+t,10)}static randomRange(t){return t[parseInt(Math.random()*t.length,10)]}static pos2index(t,e,i){return t+e*i}static index2pos(t,e){return{x:t%e,y:(t-t%e)/e}}}class Piece{constructor(t,e,i,s,a){this.id=t,this.x=e,this.y=i,isNaN(s)?this.letter=s.charAt(0):this.letter=String.fromCharCode(s),this.condition=a}}class Condition{constructor(t){this.t=0,this.i=0,this.h=0,this.l=!0,this.typegap=t||7}set type(t){this.t=t}get type(){return this.t}get alltype(){return[...Array.from({length:this.typegap+1},(t,e)=>e),...Array.from({length:this.typegap+1},(t,e)=>e+10)]}get maxtype(){return Math.max(...this.alltype)}set link(t){this.h=t}get link(){return this.h}set linkletter(t){this.o=t}get linkletter(){return this.o}set val(t){this.i=t}get val(){return this.i}set ismatch(t){this.l=t}get ismatch(){return this.l}get msg(){let t="",e="ä¸€äºŒä¸‰å››äº”å…­ä¸ƒå…«ä¹å".split(""),i=`<span style="color:red;font-weight: bold;">${this.h}</span>`;switch(this.t){case 0:t=`åœ¨ç¬¬<b>${this.i+1}</b></b>åˆ—`;break;case 1:case 11:t="";break;case 2:t=`åœ¨${i}çš„<b>${this.i>0?"å·¦ä¾§ç›¸é‚»ä½ç½®":"å³ä¾§ç›¸é‚»ä½ç½®"}</b>`;break;case 3:t=`åœ¨${i}çš„<b>${this.i>0?"å·¦è¾¹":"å³è¾¹"}</b>`;break;case 4:t=`åœ¨${i}çš„<b>${this.i>0?"å·¦æ–¹":"å³æ–¹"}</b>`;break;case 5:t=`<b>ä¸</b>åœ¨ç¬¬<b>${this.i+1}</b>åˆ—`;break;case 6:t=`<b>ä¸</b>åœ¨${i}<b>${this.i>0?"å·¦ä¾§ç›¸é‚»ä½ç½®":"å³ä¾§ç›¸é‚»ä½ç½®"}</b>`;break;case 7:t=`<b>ä¸</b>å’Œ${i}åœ¨åŒä¸€åˆ—`;break;case 10:t=`åœ¨ç¬¬<b>${e[this.i]}</b>è¡Œ`;break;case 12:t=`åœ¨${i}çš„<b>${this.i>0?"ä¸Šä¾§ç›¸é‚»ä½ç½®":"ä¸‹ä¾§ç›¸é‚»ä½ç½®"}</b>`;break;case 13:t=`åœ¨${i}çš„<b>${this.i>0?"ä¸Šè¾¹":"ä¸‹è¾¹"}</b>`;break;case 14:t=`åœ¨${i}çš„<b>${this.i>0?"ä¸Šæ–¹":"ä¸‹æ–¹"}</b>`;break;case 15:t=`<b>ä¸</b>åœ¨ç¬¬<b>${e[this.i]}</b>è¡Œ`;break;case 16:t=`<b>ä¸</b>åœ¨${i}çš„<b>${this.i>0?"ä¸Šä¾§ç›¸é‚»ä½ç½®":"ä¸‹ä¾§ç›¸é‚»ä½ç½®"}</b>`;break;case 17:t=`<b>ä¸</b>å’Œ${i}åœ¨åŒä¸€è¡Œ`}return t}randomtype(t,e){e=e>this.maxtype?this.maxtype:e;let i=this.alltype.findIndex((e,i,s)=>e>=t)||0,s=this.alltype.findIndex((t,i,s)=>t>=e)||0,a=Util.randomInt(i,s);return this.alltype[a]}}class Conditions{constructor(t){this.u=t,this.data={},this.m=t.width,this.$=t.height,this.p=this.height*this.width,this.k=t.typegap||7}get ismatch(){return null==Object.values(this.data).find(t=>0==t.ismatch)}set width(t){this.m=t,this.v()}get width(){return this.m}set height(t){this.$=t,this.v()}get height(){return this.$}set randomnum(t){this.U=t}get randomnum(){return this.U}setbypos(t,e,i){this.data[`${t}-${e}`]=i}getbypos(t,e){return this.data[`${t}-${e}`]}setbyindex(t,e){let i=Util.index2pos(t,this.m);this.data[`${i.x}-${i.y}`]=e}getbyindex(t){let e=Util.index2pos(t,this.m);return this.data[`${e.x}-${e.y}`]}getbyletter(t){return Object.values(this.data).find(e=>e.letter==t)}v(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".slice(0,this.width*this.height);t=t.split("").sort(()=>Math.random()-.5),this.data={};for(var e=0;e<this.$;e++)for(var i=0;i<this.m;i++){let s={letter:t.pop(),index:i+e*this.m,cx:-1,cy:-1,x:i,y:e,conditions:[new Condition(this.k),new Condition(this.k)],ismatch:!0};this.data[`${i}-${e}`]=s}}_(){for(var t=0;t<this.U;t++){let t=Util.randomInt(0,this.p-1),e=Util.randomInt(0,this.p-1),i=Object.keys(this.data);t!=e&&([this.data[i[t]],this.data[i[e]]]=[this.data[i[e]],this.data[i[t]]])}this.rejudgeall()}M(){for(var t=0;t<this.p/2;t++){let t=Util.randomInt(0,this.p-1),e=Util.randomInt(0,this.p-1),i=Object.keys(this.data);t!=e&&([this.data[i[t]].letter,this.data[i[e]].letter]=[this.data[i[e]].letter,this.data[i[t]].letter])}}async initlevel(t,e,i){this.randomnum=i,this.v();let s=Object.keys(this.data);for(let i=0;i<s.length;i++){let a=s[i],l=0,r=this.data[a].x,n=this.data[a].y,h=null,c=null;for(;l>=0;)l>this.U&&(e=e>t?e-1:t,l=0),h=await this.j(r,n,t,e),c=await this.j(r,n,t+10,e+10),h.type>=10||c.type<10||(l=this.isuseful(s,i,r,n,h,c,l),l>100&&(l=-1));this.data[a].conditions[0]=h,this.data[a].conditions[1]=c}}isuseful(t,e,i,s,a,l,r){for(let n=0;n<e;n++){let e=t[n],h=this.data[e].x,c=this.data[e].y,d=this.data[e].conditions[0],o=this.data[e].conditions[1];if(this.judge(i,s,d)&&this.judge(i,s,o)&&this.judge(h,c,a)&&this.judge(h,c,l))return r+1}return-1}j(t,e,i,s){let a=0,l=0,r=new Condition(this.k);switch(r.type=r.randomtype(i,s),r.type){case 0:[r.val,r.link]=[t,0];break;case 1:case 11:[r.val,r.link]=[0,0];break;case 2:r.val=0==t?1:t==this.width-1?-1:Util.randomInt(0,100)%2==0?1:-1,r.link=this.getbypos(t+r.val,e).letter;break;case 3:a=Util.randomInt(0,this.width-2)-t,a=a<0?a:a+1,r.val=a,r.link=this.getbypos(t+a,e).letter;break;case 4:a=Util.randomInt(0,this.width-2),a=a<t?a:a+1,l=Util.randomInt(0,this.height-1),r.val=a-t,r.link=this.getbypos(a,l).letter;break;case 5:a=Util.randomInt(0,this.width-2),a=a<t?a:a+1,[r.val,r.link]=[a,0];break;case 6:a=Util.randomInt(0,this.width-1),l=Util.randomInt(0,this.height-1),r.val=a-t,Math.abs(t-a)>1||e!=l?r.link=this.getbypos(a,l).letter:[r.val,r.link]=[0,this.getbyindex(0).letter];break;case 7:a=Util.randomInt(0,this.width-2),a=a<t?a:a+1,l=Util.randomInt(0,this.height-1),[r.val,r.link]=[0,this.getbypos(a,l).letter];break;case 10:[r.val,r.link]=[e,0];break;case 12:r.val=0==e?1:e==this.height-1?-1:Util.randomInt(0,100)%2==0?1:-1,r.link=this.getbypos(t,e+r.val).letter;break;case 13:l=Util.randomInt(0,this.height-2)-e,l=l<0?l:l+1,r.val=l,r.link=this.getbypos(t,e+l).letter;break;case 14:l=Util.randomInt(0,this.height-2),l=l<e?l:l+1,a=Util.randomInt(0,this.width-1),r.val=l-e,r.link=this.getbypos(a,l).letter;break;case 15:l=Util.randomInt(0,this.width-2),l=l<e?l:l+1,[r.val,r.link]=[l,0];break;case 16:l=Util.randomInt(0,this.height-1),a=Util.randomInt(0,this.width-1),r.val=l-e,Math.abs(e-l)>1||t!=a?r.link=this.getbypos(a,l).letter:[r.val,r.link]=[0,this.getbyindex(0).letter];break;case 17:l=Util.randomInt(0,this.height-2),l=l<e?l:l+1,a=Util.randomInt(0,this.width-1),[r.val,r.link]=[0,this.getbypos(a,l).letter]}return r}change(t,e,i,s,a){let l=this.data[`${t}-${e}`],r=this.data[`${i}-${s}`];[this.data[`${t}-${e}`],this.data[`${i}-${s}`]]=[r,l],"function"==typeof a&&a()}rejudgeall(){let t=0,e=0;for(const i in this.data){let s=this.data[i];if(-1!=s.cx&&-1!=s.cy){let[e,i]=[this.judge(s.cx,s.cy,s.conditions[0]),this.judge(s.cx,s.cy,s.conditions[1])];s.ismatch=e&&i,t+=e?0:1,t+=i?0:1}else s.ismatch=!0,e++}return[t,e]}judge(t,e,i){let s=this.getbyletter(i.h);if(-1==s?.cx||-1==s?.cy)return!0;switch(i.type){case 0:return i.val==t;case 1:case 11:return!0;case 2:return s.cx==t+i.val&&s.cy==e;case 3:return s.cy==e&&(s.cx-t)*i.val>0;case 4:return(s.cx-t)*i.val>0;case 5:return i.val!=t;case 6:return(s.cx-t)*i.val>=0;case 7:return s.cx!=t;case 10:return i.val==e;case 12:return s.cy==e+i.val&&s.cx==t;case 13:return s.cx==t&&(s.cy-e)*i.val>0;case 14:return(s.cy-e)*i.val>0;case 15:return i.val!=e;case 16:return(s.cy-e)*i.val>=0;case 17:return s.cy!=e;default:return!1}return!1}reset(){for(const t in this.data)this.data[t].cx=-1,this.data[t].cy=-1}}class Tip{constructor(t,e){this.el_tip=document.getElementById("tip"),this.callback=e,this.el_letter=[],this.letter=void 0,this.letterid=void 0,this.el_tip.innerHTML='<div class="bold b_gray h3 top-radio">\n            <span class="circle-bg b_yellow">â—ï¸</span>\n            ä½ç½®æç¤º\n          </div>';let i={};Object.keys(t).sort((e,i)=>t[e].letter.localeCompare(t[i].letter)).forEach(e=>{i[e]=t[e]});for(let t in i)this.addLetter(i[t])}addLetter(t){let e=t.index,i=t.letter,s=t.conditions;this.el_letter[i]=document.createElement("div"),this.el_letter[i].classList.add("tip-cell","h3"),this.el_letter[i].addEventListener("click",()=>{this.selectLetter(this,i,e),this.callback(i,e)}),this.el_letter[i].id="tip-"+i;let a=1==s[0].t&&11==s[1].t?"ä¸ç¡®å®š":s[0].msg+(1==s[0].t||11==s[1].t?"":",")+s[1].msg;this.el_letter[i].innerHTML=`\n            <span class="circle-bg-xl b_bule bold t_white">${i}</span>\n            <span class="h3">${a}</span>`,this.el_tip.appendChild(this.el_letter[i])}refreshLetter(t){for(const e in t)-1!=t[e].cx||-1!=t[e].cy?this.el_letter[t[e].letter].classList.toggle("tip-cell-mask",!0):this.el_letter[t[e].letter].classList.toggle("tip-cell-mask",!1)}cancelMask(t){t&&this.el_letter[t].classList.remove("tip-cell-mask")}selectLetter(t,e,i){if(document.querySelectorAll(".circle-bg-xl.b_red").forEach(t=>{t.classList.remove("b_red"),t.classList.add("b_bule")}),t.letter==e)t.letter=void 0,t.letterid=void 0;else{t.letter=e,t.letterid=i;let s=t.el_letter[e].firstElementChild;s.classList.add("b_red"),s.classList.remove("b_bule")}}}class Board{constructor(t,e,i){this.width=t,this.height=e,this.containerId="board",this.callback=i}generate(){const t=document.createElement("div");t.className="board-col",t.id=this.containerId;const e=document.createElement("div");e.className="board-header";const i=document.createElement("div");i.className="board-left",e.appendChild(i);for(let t=1;t<=this.width;t++){const i=document.createElement("div");i.className="cell-w board-header",i.textContent=t,e.appendChild(i)}t.appendChild(e);const s=["ä¸€","äºŒ","ä¸‰","å››","äº”","å…­","ä¸ƒ","å…«","ä¹","å"];for(let e=0;e<=this.height-1;e++){const i=document.createElement("div");i.className="board-row  cell-h";const a=document.createElement("div");a.className="board-left",a.textContent=s[e]||e,i.appendChild(a);for(let t=0;t<=this.width-1;t++){const s=document.createElement("div");s.className="cell-w b_light_blue",s.id=`${e}-${t}`,s.addEventListener("click",()=>{this.callback(t,e)}),i.appendChild(s)}t.appendChild(i)}return t}setLetter(t,e,i){let s=`${e}-${t}`;document.getElementById(s).innerHTML=i?`<span class="circle-bg-xl b_bule bold t_white">${i}</span>`:""}getLetter(t,e){let i=`${e}-${t}`;return document.getElementById(i).innerText}setcelleror(t,e,i){let s=`${e}-${t}`;document.getElementById(s).classList.toggle("cell-err",i)}render(){const t=document.getElementById(this.containerId),e=this.generate();t?t.replaceWith(e):document.getElementById("board-container").appendChild(e)}}class Game{constructor(t,e){this.width=t,this.height=e,this.level=1,this.score=0,this.isbegin=!1,this.life=3,this.score=0,document.getElementById("start").removeAttribute("disabled"),document.getElementById("reset").disabled=!0}async init(t){this.life=3+Math.floor((this.level-1)/3),this.isbegin=!0,this.level=t,this.selectletter=void 0,this.selectletterid=void 0,this.typegap=7,this.pieces=new Conditions({width:this.width,height:this.height,typegap:this.typegap}),await this.pieces.initlevel(0,Math.min(t,this.typegap),4*t),this.tip=new Tip(this.pieces.data,this.clicktip.bind(this)),this.board=new Board(this.width,this.height,this.clickboard.bind(this)),this.board.render(),document.getElementById("start").disabled=!0,document.getElementById("reset").removeAttribute("disabled"),this.showLife(),this.showScore(),this.showLevel()}clicktip(t,e){this.isbegin}clickboard(t,e){if(0!=this.isbegin){if(this.tip.letter){let i=this.pieces.getbyletter(this.tip.letter);-1!=i.cx&&-1!=i.cy&&(this.board.setLetter(i.cx,i.cy,""),this.board.setcelleror(i.cx,i.cy,!1));let s=this.board.getLetter(t,e);if(s){this.tip.cancelMask(s);let t=this.pieces.getbyletter(s);[t.cx,t.cy]=[-1,-1]}i.cx=t,i.cy=e,this.board.setLetter(t,e,i.letter),this.tip.refreshLetter(this.pieces.data);let[a,l]=this.pieces.rejudgeall();for(const t in this.pieces.data){const e=this.pieces.data[t];e.ismatch||this.board.setcelleror(e.cx,e.cy,!0)}this.life=a>0?this.life-1:this.life,0==l&&0==a&&(this.showDialog(`<span style="color:red;font-weight: bold;">+${g.life}</span><br>ğŸ˜„æ­å–œè¿‡å…³,è‡ªåŠ¨è¿›å…¥ä¸‹ä¸€å…³!`),this.score+=this.life,this.level++,this.init(this.level))}else{let i=this.board.getLetter(t,e);if(i){this.tip.cancelMask(i);let t=this.pieces.getbyletter(i);[t.cx,t.cy]=[-1,-1]}this.board.setLetter(t,e,""),this.board.setcelleror(t,e,!1)}this.showLife()}}reset(){this.pieces.reset(),this.tip=new Tip(this.pieces.data,this.clicktip.bind(this)),this.board=new Board(this.width,this.height,this.clickboard.bind(this)),this.board.render()}showLife(){document.getElementById("life").innerHTML=g.life,0==g.life&&(document.getElementById("reset").disabled=!0,document.getElementById("start").removeAttribute("disabled"),document.getElementById("board-container").disabled=!0,this.showDialog("ğŸ˜¢æ¸¸æˆç»“æŸ!"),this.isbegin=!1)}showLevel(){document.getElementById("level").innerHTML=g.level}showScore(){document.getElementById("score").innerHTML=g.score}showDialog(t){const e=document.createElement("div");e.className="game-over-modal",e.innerHTML=`\n        <div class="game-over-content">\n          <p>${t}</p>\n        </div>\n      `,document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},3e3)}}function startGame(t){g.init(t)}function resetGame(){g.reset()}function next(){g.init(++g.level)}let g=new Game(4,4);document.addEventListener("keydown",function(t){if(t.keyCode>=65&&t.keyCode<=90){let e=String.fromCharCode(t.keyCode),i=g.pieces.getbyletter(e);i&&(g.tip.selectLetter(g.tip,e,i.index),g.clicktip(e,i.index))}else if(32==t.keyCode){let t=window.event;if("number"==typeof t.clientX&&"number"==typeof t.clientY&&isFinite(t.clientX)&&isFinite(t.clientY)){let e=document.elementFromPoint(t.clientX,t.clientY);e&&e.click()}}})</script>